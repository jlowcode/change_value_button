define(["jquery","fab/element"],function(e,t){return window.FbChange_value_button=new Class({Extends:t,initialize:function(e,t){this.setPlugin("fabrikChange_value_button"),this.parent(e,t),this.removeLabel();var n=document.getElementById("cvb_button"),o=this;n.onclick=function(){!0===confirm(o.options.alertConfirm)&&o.changeValue()}},removeLabel:function(){var e,t,n;for(e=document.getElementsByClassName("fb_el_"+this.options.element)[0].childNodes,n=0;n<e.length;n++)"#text"!==(t=e[n]).nodeName&&"#comment"!==t.nodeName&&"fabrikLabel"===t.className&&t.remove()},insertLoading:function(){var e=document.getElementById("g-page-surround");document.getElement("body").style.overflow="hidden";var t=document.createElement("div");t.setAttribute("id","cvb_loading"),t.setAttribute("style","position: absolute;\n  top: 0px;\n  left: 0px;\n  z-index: 100;\n  background-color: #000;\n  opacity: 0.5;\n  width: 100%;\n  height: 100%;\n  display: block;  text-align: center;");var n=document.createElement("img");n.setAttribute("src","https://static.wixstatic.com/media/9bd62a_40c8fc9e5a794e9fad1655b05c3d7e0c~mv2.gif"),n.setAttribute("id","cvb_loading_img"),n.setAttribute("style","position: fixed; top: 40%; left: 42%; z-index: 1000;"),t.appendChild(n),e.appendChild(t)},removeLoading:function(){var e=document.getElementById("cvb_loading"),t=document.getElement("body");e.remove(),t.style.overflow="auto"},changeValue:function(){var t=this;e.ajax({url:Fabrik.liveSite+"index.php",method:"POST",data:{option:"com_fabrik",format:"raw",task:"plugin.pluginAjax",plugin:"change_value_button",method:"changeValue",g:"element",formId:this.options.formId,rowId:this.options.rowId,table:this.options.table,elementName:this.options.elementName,fieldValue:this.options.fieldValue},beforeSend:function(){t.insertLoading()}}).done(function(e){t.removeLoading(),setTimeout(function(){alert(t.options.alertSuccess)},100)})}}),window.FbChange_value_button});